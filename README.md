# StaroDrive - Cloudflare R2 ç½‘ç›˜ç³»ç»Ÿ

åŸºäº Cloudflare R2 + Pages æ­å»ºçš„ç°ä»£åŒ–åœ¨çº¿ç½‘ç›˜ç³»ç»Ÿã€‚

[æ±‰åŒ–ä¿®æ”¹è‡ª longern/FlareDrive](https://github.com/longern/FlareDrive)

![StaroDrive](https://img.shields.io/badge/Cloudflare-R2-F38020?style=flat-square&logo=cloudflare)
![License](https://img.shields.io/badge/License-MIT-blue?style=flat-square)

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- ğŸ“ **æ–‡ä»¶ç®¡ç†** - ä¸Šä¼ ã€ä¸‹è½½ã€é‡å‘½åã€ç§»åŠ¨ã€åˆ é™¤
- ğŸ“‚ **æ–‡ä»¶å¤¹æ”¯æŒ** - åˆ›å»ºæ–‡ä»¶å¤¹ã€æ–‡ä»¶å¤¹ä¸‹è½½ï¼ˆæ‰“åŒ…ZIPï¼‰
- ğŸ” **é«˜çº§æœç´¢** - æ”¯æŒæ–‡ä»¶åã€ç±»å‹ã€æ‰©å±•åã€å¤§å°å¤šç»´åº¦æœç´¢
- ğŸ–¼ï¸ **ç¼©ç•¥å›¾é¢„è§ˆ** - å›¾ç‰‡å’Œè§†é¢‘è‡ªåŠ¨ç”Ÿæˆç¼©ç•¥å›¾
- ğŸ“± **å“åº”å¼è®¾è®¡** - å®Œç¾æ”¯æŒ PC å’Œç§»åŠ¨ç«¯

### ç°ä»£åŒ– UI
- ğŸŒ“ **ä¸»é¢˜åˆ‡æ¢** - æ”¯æŒäº®è‰²/æš—è‰²æ¨¡å¼ï¼Œè·Ÿéšç³»ç»Ÿæˆ–æ‰‹åŠ¨åˆ‡æ¢
- ğŸ´ **å¡ç‰‡å¸ƒå±€** - ç±» Notion é£æ ¼çš„ç°ä»£åŒ–ç•Œé¢
- ğŸ“Š **ç»Ÿè®¡é¢æ¿** - å­˜å‚¨æ¦‚è§ˆã€æ–‡ä»¶ç»Ÿè®¡ã€ç±»å‹åˆ†å¸ƒ
- ğŸ“ˆ **æ“ä½œç»Ÿè®¡** - R2 Aç±»/Bç±»æ“ä½œæ¬¡æ•°ç»Ÿè®¡ï¼ˆéœ€é…ç½®ï¼‰

### æ‰¹é‡æ“ä½œ
- â˜‘ï¸ **å¤šé€‰æ¨¡å¼** - æ‰¹é‡é€‰æ‹©æ–‡ä»¶å’Œæ–‡ä»¶å¤¹
- ğŸ“¦ **æ‰¹é‡ä¸‹è½½** - å¤šæ–‡ä»¶æ‰“åŒ… ZIP ä¸‹è½½
- ğŸ—‘ï¸ **æ‰¹é‡åˆ é™¤** - ä¸€é”®åˆ é™¤å¤šä¸ªæ–‡ä»¶
- ğŸ“ **æ‰¹é‡ç§»åŠ¨** - æ‰¹é‡ç§»åŠ¨åˆ°æŒ‡å®šç›®å½•

### æ–‡ä»¶åˆ†äº«
- ğŸ”— **åˆ†äº«é“¾æ¥** - ç”Ÿæˆæ–‡ä»¶åˆ†äº«é“¾æ¥
- â° **æ—¶æ•ˆæ§åˆ¶** - æ”¯æŒ 1å°æ—¶/1å¤©/7å¤©/30å¤©/æ°¸ä¹…/è‡ªå®šä¹‰åˆ†é’Ÿ
- ğŸ”’ **å¯†ç ä¿æŠ¤** - å¯é€‰è®¾ç½®è®¿é—®å¯†ç 
- ğŸ“Š **ä¸‹è½½é™åˆ¶** - å¯é€‰é™åˆ¶æœ€å¤§ä¸‹è½½æ¬¡æ•°
- ğŸ’» **wget å‘½ä»¤** - è‡ªåŠ¨ç”Ÿæˆ wget ä¸‹è½½å‘½ä»¤

### æƒé™ç³»ç»Ÿ
- ğŸ‘¤ **å¤šç”¨æˆ·æ”¯æŒ** - æ”¯æŒå¤šç®¡ç†å‘˜è´¦æˆ·
- ğŸ” **ç›®å½•æˆæƒ** - ä¸ºä¸åŒç”¨æˆ·åˆ†é…ä¸åŒç›®å½•æƒé™
- ğŸ‘ï¸ **åªè¯»ç”¨æˆ·** - æ”¯æŒåªèƒ½æŸ¥çœ‹å’Œä¸‹è½½çš„åªè¯»è´¦æˆ·
- ğŸ‘¥ **è®¿å®¢æ¨¡å¼** - å¯é…ç½®è®¿å®¢å¯è®¿é—®çš„ç›®å½•ï¼ˆä»…æŸ¥çœ‹ï¼‰
- ğŸ¨ **ç°ä»£åŒ–ç™»å½•** - è‡ªå®šä¹‰ç™»å½•ç•Œé¢ï¼Œéæµè§ˆå™¨å¼¹çª—
- ğŸ”‘ **æƒé™é¢æ¿** - å¯è§†åŒ–æŸ¥çœ‹å½“å‰ç”¨æˆ·æƒé™

---

## ğŸš€ å¿«é€Ÿéƒ¨ç½²

### å‰ç½®è¦æ±‚

- Cloudflare è´¦æˆ·
- GitHub è´¦æˆ·

### éƒ¨ç½²æ­¥éª¤

#### ç¬¬ä¸€æ­¥ï¼šFork ä»“åº“

ç‚¹å‡»æœ¬ä»“åº“å³ä¸Šè§’çš„ **Fork** æŒ‰é’®ï¼Œå°†ä»“åº“å¤åˆ¶åˆ°ä½ çš„ GitHub è´¦æˆ·ã€‚

#### ç¬¬äºŒæ­¥ï¼šåˆ›å»º R2 å­˜å‚¨æ¡¶

1. ç™»å½• [Cloudflare æ§åˆ¶å°](https://dash.cloudflare.com)
2. å·¦ä¾§èœå•é€‰æ‹© **R2 å¯¹è±¡å­˜å‚¨**
3. ç‚¹å‡» **åˆ›å»ºå­˜å‚¨æ¡¶**
4. è¾“å…¥å­˜å‚¨æ¡¶åç§°ï¼ˆå¦‚ `my-drive`ï¼‰ï¼Œé€‰æ‹©åœ°åŒºï¼Œç‚¹å‡»åˆ›å»º
5. è¿›å…¥å­˜å‚¨æ¡¶ â†’ **è®¾ç½®** â†’ **å…¬å¼€è®¿é—®**
6. ç‚¹å‡» **å…è®¸è®¿é—®**ï¼Œå¤åˆ¶ **å…¬å…±å­˜å‚¨æ¡¶ URL**ï¼ˆæ ¼å¼å¦‚ï¼š`https://pub-xxx.r2.dev`ï¼‰

#### ç¬¬ä¸‰æ­¥ï¼šåˆ›å»º Pages é¡¹ç›®

1. è¿›å…¥ Cloudflare æ§åˆ¶å° â†’ **Workers å’Œ Pages**
2. ç‚¹å‡» **åˆ›å»º** â†’ **Pages** â†’ **è¿æ¥åˆ° Git**
3. é€‰æ‹©ä½  Fork çš„ä»“åº“
4. é¡¹ç›®åç§°å¯è‡ªå®šä¹‰ï¼ˆå¦‚ `my-drive`ï¼‰
5. **æ¡†æ¶é¢„è®¾** ä¿æŒé»˜è®¤ï¼ˆæ— ï¼‰
6. å±•å¼€ **ç¯å¢ƒå˜é‡ï¼ˆé«˜çº§ï¼‰**ï¼Œæ·»åŠ ä»¥ä¸‹å˜é‡ï¼š

| å˜é‡åç§° | å€¼ | è¯´æ˜ |
|---------|-----|------|
| `PUBURL` | `https://pub-xxx.r2.dev` | ä½ çš„å…¬å…±å­˜å‚¨æ¡¶ URL |
| `GUEST` | `public/` | è®¿å®¢å¯å†™ç›®å½•ï¼ˆç•™ç©ºåˆ™ç¦æ­¢ï¼‰ |
| `admin:ä½ çš„å¯†ç ` | `*` | ç®¡ç†å‘˜è´¦æˆ·ï¼Œ`*` è¡¨ç¤ºæ‰€æœ‰ç›®å½•æƒé™ |

7. ç‚¹å‡» **ä¿å­˜å¹¶éƒ¨ç½²**

#### ç¬¬å››æ­¥ï¼šç»‘å®š R2 å­˜å‚¨æ¡¶

1. éƒ¨ç½²å®Œæˆåï¼Œè¿›å…¥ Pages é¡¹ç›®
2. **è®¾ç½®** â†’ **å‡½æ•°** â†’ **R2 å­˜å‚¨æ¡¶ç»‘å®š**
3. ç‚¹å‡» **æ·»åŠ ç»‘å®š**
4. å˜é‡åç§°å¡«å†™ï¼š`BUCKET`
5. R2 å­˜å‚¨æ¡¶é€‰æ‹©ä½ åˆ›å»ºçš„å­˜å‚¨æ¡¶
6. ç‚¹å‡»ä¿å­˜

#### ç¬¬äº”æ­¥ï¼šç»‘å®š KV å‘½åç©ºé—´ï¼ˆåˆ†äº«åŠŸèƒ½éœ€è¦ï¼‰

1. è¿›å…¥ Cloudflare æ§åˆ¶å° â†’ **Workers å’Œ Pages** â†’ **KV**
2. ç‚¹å‡» **åˆ›å»ºå‘½åç©ºé—´**ï¼Œåç§°å¡«å†™ `ossShares`
3. å›åˆ° Pages é¡¹ç›® â†’ **è®¾ç½®** â†’ **å‡½æ•°** â†’ **KV å‘½åç©ºé—´ç»‘å®š**
4. ç‚¹å‡» **æ·»åŠ ç»‘å®š**
5. å˜é‡åç§°å¡«å†™ï¼š`ossShares`
6. KV å‘½åç©ºé—´é€‰æ‹©åˆšåˆ›å»ºçš„ `ossShares`
7. ç‚¹å‡»ä¿å­˜

#### ç¬¬å…­æ­¥ï¼šé‡æ–°éƒ¨ç½²

1. è¿›å…¥ **éƒ¨ç½²** é¡µé¢
2. æ‰¾åˆ°æœ€æ–°çš„éƒ¨ç½²ï¼Œç‚¹å‡»å³ä¾§ **...** â†’ **é‡è¯•éƒ¨ç½²**
3. ç­‰å¾…éƒ¨ç½²å®Œæˆï¼Œè®¿é—®ä½ çš„åŸŸåå³å¯ä½¿ç”¨

---

## âš™ï¸ ç¯å¢ƒå˜é‡é…ç½®

### åŸºç¡€é…ç½®

| å˜é‡å | å¿…éœ€ | ç¤ºä¾‹å€¼ | è¯´æ˜ |
|--------|------|--------|------|
| `PUBURL` | âœ… | `https://pub-xxx.r2.dev` | R2 å…¬å…±å­˜å‚¨æ¡¶ URLï¼ˆæœåŠ¡ç«¯è·å–æ–‡ä»¶ç”¨ï¼‰ |
| `FILE_BASE_URL` | âŒ | `https://cdn.example.com` | å‰ç«¯æ–‡ä»¶è®¿é—® URLï¼ˆCDN å›æºåœºæ™¯ä½¿ç”¨ï¼‰ |
| `GUEST` | âŒ | `public/` | è®¿å®¢å¯å†™ç›®å½•ï¼Œå¤šä¸ªç”¨é€—å·åˆ†éš” |

### ç”¨æˆ·é…ç½®

ç”¨æˆ·ä»¥ `ç”¨æˆ·å:å¯†ç ` æ ¼å¼ä½œä¸ºå˜é‡åï¼Œå€¼ä¸ºæƒé™é…ç½®ã€‚

| å˜é‡å | å€¼ | è¯´æ˜ |
|--------|-----|------|
| `admin:123456` | `*` | ç®¡ç†å‘˜ï¼Œæ‹¥æœ‰æ‰€æœ‰æƒé™ |
| `user1:password1` | `/photos, /documents` | æ™®é€šç”¨æˆ·ï¼Œå¯è¯»å†™æŒ‡å®šç›®å½• |
| `viewer:password2` | `readonly, /public` | åªè¯»ç”¨æˆ·ï¼Œåªèƒ½æŸ¥çœ‹å’Œä¸‹è½½ |

#### æƒé™è¯´æ˜

| æƒé™å€¼ | è¯´æ˜ |
|--------|------|
| `*` | ç®¡ç†å‘˜ï¼Œæ‹¥æœ‰æ‰€æœ‰ç›®å½•çš„è¯»å†™æƒé™ |
| `/path1, /path2` | æ™®é€šç”¨æˆ·ï¼Œå¯è¯»å†™æŒ‡å®šç›®å½• |
| `readonly, /path` | åªè¯»ç”¨æˆ·ï¼Œåªèƒ½æŸ¥çœ‹å’Œä¸‹è½½æŒ‡å®šç›®å½• |

#### è®¿å®¢é…ç½®

| å˜é‡å | å€¼ | è¯´æ˜ |
|--------|-----|------|
| `GUEST` | `public, shared` | è®¿å®¢å¯è®¿é—®çš„ç›®å½•ï¼ˆä»…æŸ¥çœ‹å’Œä¸‹è½½ï¼‰ |
| `GUEST_UPLOAD_PASSWORD` | `your_password` | è®¿å®¢ä¸Šä¼ å¯†ç ï¼ˆå¯é€‰ï¼‰ |

> âš ï¸ **æ³¨æ„**ï¼š
> - ç›®å½•è·¯å¾„ä¸è¦ä»¥ `/` å¼€å¤´ï¼ˆç¯å¢ƒå˜é‡ä¸­é…ç½®æ—¶ï¼‰
> - è®¿å®¢é»˜è®¤åªèƒ½æŸ¥çœ‹å’Œä¸‹è½½ï¼Œä¸èƒ½ä¸Šä¼ 
> - é…ç½® `GUEST_UPLOAD_PASSWORD` åï¼Œè®¿å®¢è¾“å…¥æ­£ç¡®å¯†ç å¯ä¸Šä¼ æ–‡ä»¶
> - è®¿å®¢çœ‹ä¸åˆ°ç»Ÿè®¡é¢æ¿

### æ“ä½œç»Ÿè®¡é…ç½®ï¼ˆå¯é€‰ï¼‰

å¦‚éœ€å¯ç”¨ R2 æ“ä½œç»Ÿè®¡ï¼ˆAç±»/Bç±»æ“ä½œæ¬¡æ•°ï¼‰ï¼Œéœ€æ·»åŠ ä»¥ä¸‹å˜é‡ï¼š

| å˜é‡å | å¿…éœ€ | è¯´æ˜ |
|--------|------|------|
| `CF_ACCOUNT_ID` | âœ… | Cloudflare è´¦æˆ· ID |
| `CF_API_TOKEN` | âœ… | API Tokenï¼ˆéœ€ Analytics è¯»å–æƒé™ï¼‰ |
| `R2_BUCKET_NAME` | âŒ | æŒ‡å®šç»Ÿè®¡çš„å­˜å‚¨æ¡¶åç§°ï¼ˆä¸å¡«åˆ™ç»Ÿè®¡æ‰€æœ‰ï¼‰ |

#### è·å–è´¦æˆ· ID

1. ç™»å½• Cloudflare æ§åˆ¶å°
2. å³ä¾§è¾¹æ å¯ä»¥çœ‹åˆ° **è´¦æˆ· ID**
3. å¤åˆ¶è¯¥ ID

#### åˆ›å»º API Token

1. è¿›å…¥ [API Tokens é¡µé¢](https://dash.cloudflare.com/profile/api-tokens)
2. ç‚¹å‡» **åˆ›å»ºä»¤ç‰Œ**
3. é€‰æ‹© **åˆ›å»ºè‡ªå®šä¹‰ä»¤ç‰Œ**
4. é…ç½®æƒé™ï¼š
   - **è´¦æˆ·** â†’ **Account Analytics** â†’ **è¯»å–**
5. è´¦æˆ·èµ„æºé€‰æ‹©ä½ çš„è´¦æˆ·
6. ç‚¹å‡» **ç»§ç»­ä»¥æ˜¾ç¤ºæ‘˜è¦** â†’ **åˆ›å»ºä»¤ç‰Œ**
7. å¤åˆ¶ç”Ÿæˆçš„ Token

#### æ“ä½œç±»å‹è¯´æ˜

| ç±»å‹ | åŒ…å«æ“ä½œ | è®¡è´¹ |
|------|---------|------|
| **Aç±»æ“ä½œ** | PUTã€POSTã€DELETEã€ListObjectsã€ä¸Šä¼ ã€å¤åˆ¶ç­‰ | è¾ƒé«˜ |
| **Bç±»æ“ä½œ** | GETã€HEADã€ä¸‹è½½ã€æŸ¥è¯¢ç­‰ | è¾ƒä½ |

ç»Ÿè®¡å‘¨æœŸä¸ºæœ€è¿‘ 30 å¤©ï¼Œæ•°æ®ç¼“å­˜ 30 åˆ†é’Ÿã€‚

### CDN å›æºé…ç½®ï¼ˆå¯é€‰ï¼‰

å¦‚æœä½ æƒ³é€šè¿‡ç¬¬ä¸‰æ–¹ CDNï¼ˆå¦‚ Edge Oneã€åˆæ‹äº‘ç­‰ï¼‰å›æºè®¿é—®æ–‡ä»¶ï¼Œå¯ä»¥é…ç½® `FILE_BASE_URL`ã€‚

#### ä½¿ç”¨åœºæ™¯

```
ç”¨æˆ·æµè§ˆå™¨
    â†“ è®¿é—®
CDN (ä¾‹å¦‚ Edge One)
    â†“ å›æº
Cloudflare Pages (æœ¬é¡¹ç›®)
    â†“ API è¯·æ±‚
R2 å­˜å‚¨æ¡¶
```

#### é…ç½®æ­¥éª¤

1. **é…ç½® CDN å›æºåˆ° R2**
   - åœ¨ CDN æ§åˆ¶å°åˆ›å»ºç«™ç‚¹ï¼ˆå¦‚ `cdn.example.com`ï¼‰
   - é…ç½®å›æºåœ°å€ä¸º R2 å…¬å…± URLï¼ˆå¦‚ `https://pub-xxx.r2.dev`ï¼‰

2. **è®¾ç½®ç¯å¢ƒå˜é‡**
   ```
   FILE_BASE_URL = https://cdn.example.com
   ```

3. **å·¥ä½œåŸç†**
   - å‰ç«¯è¯·æ±‚æ–‡ä»¶æ—¶ä¼šä½¿ç”¨ `FILE_BASE_URL`ï¼ˆå¦‚ `https://cdn.example.com/file.jpg`ï¼‰
   - ç”¨æˆ·æµè§ˆå™¨ç›´æ¥è¯·æ±‚ CDN
   - CDN å›æºåˆ° R2 è·å–æ–‡ä»¶

#### ä¸é…ç½®æ—¶çš„é»˜è®¤è¡Œä¸º

å¦‚æœä¸é…ç½® `FILE_BASE_URL`ï¼š
- å‰ç«¯ä½¿ç”¨ `/raw/file.jpg` ç›¸å¯¹è·¯å¾„
- è¯·æ±‚é€šè¿‡ Cloudflare Pages Function ä»£ç†åˆ° R2

---

## ğŸ“– ä½¿ç”¨æŒ‡å—

### åŸºæœ¬æ“ä½œ

#### ä¸Šä¼ æ–‡ä»¶
- ç‚¹å‡»å³ä¸‹è§’ **ä¸Šä¼ æŒ‰é’®**
- æˆ–ç›´æ¥ **æ‹–æ‹½æ–‡ä»¶** åˆ°é¡µé¢ä»»æ„ä½ç½®

#### åˆ›å»ºæ–‡ä»¶å¤¹
- ç‚¹å‡»ä¸Šä¼ æŒ‰é’® â†’ é€‰æ‹© **æ–°å»ºæ–‡ä»¶å¤¹**
- æˆ–ç‚¹å‡»å·¥å…·æ çš„æ–‡ä»¶å¤¹å›¾æ ‡

#### æ–‡ä»¶æ“ä½œ
- **å•å‡»æ–‡ä»¶**ï¼šé¢„è§ˆ/ä¸‹è½½
- **å³é”®/é•¿æŒ‰**ï¼šæ‰“å¼€æ“ä½œèœå•ï¼ˆé‡å‘½åã€ä¸‹è½½ã€å¤åˆ¶ã€ç§»åŠ¨ã€åˆ é™¤ï¼‰

### æ‰¹é‡æ“ä½œ

1. ç‚¹å‡»å·¥å…·æ çš„ **é€‰æ‹©å›¾æ ‡** è¿›å…¥é€‰æ‹©æ¨¡å¼
2. ç‚¹å‡»æ–‡ä»¶å¡ç‰‡å·¦ä¸Šè§’çš„å¤é€‰æ¡†é€‰æ‹©æ–‡ä»¶
3. åº•éƒ¨æµ®åŠ¨æ æ˜¾ç¤ºå·²é€‰æ•°é‡å’Œæ“ä½œæŒ‰é’®
4. å¯è¿›è¡Œæ‰¹é‡ä¸‹è½½ã€ç§»åŠ¨ã€åˆ é™¤

### ç™»å½•ä¸æƒé™

#### ç™»å½•
1. ç‚¹å‡»é¡¶éƒ¨å¯¼èˆªæ å³ä¾§çš„ **ç™»å½•æŒ‰é’®**
2. åœ¨å¼¹å‡ºçš„ç™»å½•å¯¹è¯æ¡†ä¸­è¾“å…¥ç”¨æˆ·åå’Œå¯†ç 
3. ç™»å½•æˆåŠŸåä¼šæ˜¾ç¤ºç”¨æˆ·å¤´åƒå’Œç”¨æˆ·å

#### æŸ¥çœ‹æƒé™
- ç™»å½•åç‚¹å‡»ç”¨æˆ·å¤´åƒï¼Œå±•å¼€ä¸‹æ‹‰èœå•
- å¯ä»¥çœ‹åˆ°å½“å‰ç”¨æˆ·çš„è§’è‰²ï¼ˆç®¡ç†å‘˜/æ™®é€šç”¨æˆ·ï¼‰
- æ˜¾ç¤ºå¯å†™å…¥çš„ç›®å½•åˆ—è¡¨
- ç®¡ç†å‘˜æ‹¥æœ‰æ‰€æœ‰ç›®å½•æƒé™

#### é€€å‡ºç™»å½•
- ç‚¹å‡»ç”¨æˆ·å¤´åƒ â†’ ç‚¹å‡» **é€€å‡ºç™»å½•**
- é€€å‡ºåå°†ä»¥è®¿å®¢èº«ä»½æµè§ˆ

### ä¸»é¢˜åˆ‡æ¢

ç‚¹å‡»é¡¶éƒ¨å¯¼èˆªæ å³ä¾§çš„ **å¤ªé˜³/æœˆäº®å›¾æ ‡** åˆ‡æ¢äº®è‰²/æš—è‰²ä¸»é¢˜ã€‚

### è§†å›¾åˆ‡æ¢

å·¥å…·æ æä¾›ä¸¤ç§è§†å›¾ï¼š
- **ç½‘æ ¼è§†å›¾**ï¼šå¡ç‰‡å¼å¸ƒå±€ï¼Œé€‚åˆæµè§ˆå›¾ç‰‡
- **åˆ—è¡¨è§†å›¾**ï¼šç´§å‡‘åˆ—è¡¨ï¼Œé€‚åˆæŸ¥çœ‹è¯¦ç»†ä¿¡æ¯

### é«˜çº§æœç´¢

æ”¯æŒä¸¤ç§æœç´¢æ–¹å¼ï¼š

#### æ–¹å¼ä¸€ï¼šå¯è§†åŒ–æœç´¢é¢æ¿
ç‚¹å‡»æœç´¢æ¡†å³ä¾§çš„ **ç­›é€‰å›¾æ ‡** æ‰“å¼€é«˜çº§æœç´¢é¢æ¿ï¼Œå¯ä»¥ï¼š
- é€‰æ‹©æ–‡ä»¶ç±»å‹ï¼ˆå›¾ç‰‡ã€è§†é¢‘ã€æ–‡æ¡£ã€å‹ç¼©åŒ…ã€ç¨‹åºç­‰ï¼‰
- è¾“å…¥æ‰©å±•åç­›é€‰ï¼ˆå¦‚ `.pdf`ã€`.jar`ï¼‰
- è®¾ç½®æ–‡ä»¶å¤§å°èŒƒå›´

#### æ–¹å¼äºŒï¼šæœç´¢è¯­æ³•
ç›´æ¥åœ¨æœç´¢æ¡†è¾“å…¥æŸ¥è¯¢è¯­æ³•ï¼š

| è¯­æ³• | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `type:ç±»å‹` | æŒ‰æ–‡ä»¶ç±»å‹ç­›é€‰ | `type:å›¾ç‰‡`ã€`type:è§†é¢‘`ã€`type:å‹ç¼©` |
| `ext:æ‰©å±•å` æˆ– `.æ‰©å±•å` | æŒ‰æ‰©å±•åç­›é€‰ | `ext:pdf`ã€`.jar`ã€`ext:mp4,mkv` |
| `size>å¤§å°` | å¤§äºæŒ‡å®šå¤§å° | `size>100MB`ã€`size>=1GB` |
| `size<å¤§å°` | å°äºæŒ‡å®šå¤§å° | `size<50KB`ã€`size<=10MB` |
| `size:èŒƒå›´` | å¤§å°èŒƒå›´ | `size:100MB-1GB`ã€`size:10KB..500KB` |
| `å…³é”®è¯` | æ–‡ä»¶ååŒ…å« | `backup`ã€`2024` |

**æ”¯æŒçš„æ–‡ä»¶ç±»å‹ï¼š**
- **å›¾ç‰‡**ï¼š`image`ã€`å›¾ç‰‡`ã€`img`
- **è§†é¢‘**ï¼š`video`ã€`è§†é¢‘`ã€`vid`
- **æ–‡æ¡£**ï¼š`document`ã€`æ–‡æ¡£`ã€`doc`ã€`text`
- **å‹ç¼©åŒ…**ï¼š`archive`ã€`å‹ç¼©`ã€`zip`
- **ç¨‹åº**ï¼š`executable`ã€`ç¨‹åº`ã€`exe`
- **å…¶ä»–**ï¼š`other`ã€`å…¶ä»–`

**æ”¯æŒçš„å¤§å°å•ä½ï¼š**
`B`ã€`KB`ã€`MB`ã€`GB`ã€`TB`ï¼ˆä¸åŒºåˆ†å¤§å°å†™ï¼‰

**ç»„åˆæŸ¥è¯¢ç¤ºä¾‹ï¼š**
```
# æŸ¥æ‰¾æ‰€æœ‰å¤§äº 100MB çš„å‹ç¼©åŒ…
type:å‹ç¼© size>100MB

# æŸ¥æ‰¾æ‰€æœ‰ JAR æ–‡ä»¶
.jar

# æŸ¥æ‰¾æ–‡ä»¶ååŒ…å« backup çš„ PDF æ–‡ä»¶
backup ext:pdf

# æŸ¥æ‰¾ 10MB åˆ° 500MB ä¹‹é—´çš„è§†é¢‘
type:è§†é¢‘ size:10MB-500MB
```

### æ–‡ä»¶åˆ†äº«

#### åˆ›å»ºåˆ†äº«
1. å³é”®ç‚¹å‡»æ–‡ä»¶ â†’ é€‰æ‹© **åˆ†äº«**
2. è®¾ç½®åˆ†äº«é€‰é¡¹ï¼š
   - **æœ‰æ•ˆæœŸ**ï¼š1å°æ—¶/1å¤©/7å¤©/30å¤©/æ°¸ä¹…/è‡ªå®šä¹‰åˆ†é’Ÿ
   - **å¯†ç ä¿æŠ¤**ï¼šå¯é€‰ï¼Œè®¾ç½®è®¿é—®å¯†ç 
   - **ä¸‹è½½é™åˆ¶**ï¼šå¯é€‰ï¼Œé™åˆ¶æœ€å¤§ä¸‹è½½æ¬¡æ•°
3. ç‚¹å‡» **åˆ›å»ºåˆ†äº«é“¾æ¥**
4. å¤åˆ¶åˆ†äº«é“¾æ¥æˆ– wget å‘½ä»¤

#### åˆ†äº«é“¾æ¥æ ¼å¼
- **ç½‘é¡µè®¿é—®**ï¼š`https://your-domain.com/s/{shareId}`
- **ç›´æ¥ä¸‹è½½**ï¼š`https://your-domain.com/s/{shareId}/download`
- **å¸¦å¯†ç ä¸‹è½½**ï¼š`https://your-domain.com/s/{shareId}/download?pwd=å¯†ç `

#### wget ä¸‹è½½ç¤ºä¾‹
```bash
# æ— å¯†ç 
wget --content-disposition "https://your-domain.com/s/abc123/download"

# æœ‰å¯†ç 
wget --content-disposition "https://your-domain.com/s/abc123/download?pwd=mypassword"
```

---

## ğŸ”§ æœ¬åœ°å¼€å‘

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/ä½ çš„ç”¨æˆ·å/Cloudflare-R2-oss.git
cd Cloudflare-R2-oss

# å®‰è£…ä¾èµ–
pnpm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev
```

å¼€å‘æœåŠ¡å™¨å¯åŠ¨åè®¿é—® `http://localhost:8788`

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
Cloudflare-R2-oss/
â”œâ”€â”€ assets/                 # å‰ç«¯èµ„æº
â”‚   â”œâ”€â”€ App.vue            # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ Header.vue         # é¡¶éƒ¨å¯¼èˆªæ ï¼ˆå«ç”¨æˆ·èœå•ã€æœç´¢ï¼‰
â”‚   â”œâ”€â”€ AdvancedSearchPanel.vue # é«˜çº§æœç´¢é¢æ¿
â”‚   â”œâ”€â”€ StatsCards.vue     # ç»Ÿè®¡å¡ç‰‡
â”‚   â”œâ”€â”€ Breadcrumb.vue     # é¢åŒ…å±‘å¯¼èˆª
â”‚   â”œâ”€â”€ Toolbar.vue        # å·¥å…·æ 
â”‚   â”œâ”€â”€ FileCard.vue       # æ–‡ä»¶å¡ç‰‡
â”‚   â”œâ”€â”€ BatchBar.vue       # æ‰¹é‡æ“ä½œæ 
â”‚   â”œâ”€â”€ Dialog.vue         # å¯¹è¯æ¡†ç»„ä»¶
â”‚   â”œâ”€â”€ LoginDialog.vue    # ç™»å½•å¯¹è¯æ¡†
â”‚   â”œâ”€â”€ ShareDialog.vue    # åˆ†äº«å¯¹è¯æ¡†
â”‚   â”œâ”€â”€ InputDialog.vue    # è¾“å…¥å¯¹è¯æ¡†
â”‚   â”œâ”€â”€ Menu.vue           # èœå•ç»„ä»¶
â”‚   â”œâ”€â”€ UploadPopup.vue    # ä¸Šä¼ å¼¹çª—
â”‚   â”œâ”€â”€ MimeIcon.vue       # æ–‡ä»¶å›¾æ ‡
â”‚   â”œâ”€â”€ search.mjs         # æœç´¢è§£æå¼•æ“
â”‚   â”œâ”€â”€ main.css           # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ main.mjs           # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ favicon.svg        # ç½‘ç«™å›¾æ ‡
â”‚   â””â”€â”€ manifest.json      # PWA é…ç½®
â”œâ”€â”€ functions/              # Cloudflare Pages Functions
â”‚   â””â”€â”€ api/
â”‚       â”œâ”€â”€ auth.ts        # è®¤è¯ API
â”‚       â”œâ”€â”€ stats.ts       # ç»Ÿè®¡ API
â”‚       â”œâ”€â”€ children/      # æ–‡ä»¶åˆ—è¡¨ API
â”‚       â”œâ”€â”€ share/         # åˆ†äº« API
â”‚       â””â”€â”€ write/         # æ–‡ä»¶æ“ä½œ API
â”‚   â””â”€â”€ s/                 # åˆ†äº«é¡µé¢
â”‚       â””â”€â”€ [id].ts        # åˆ†äº«è¯¦æƒ…é¡µ
â”œâ”€â”€ utils/                  # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ auth.ts            # æƒé™éªŒè¯
â”‚   â””â”€â”€ share.ts           # åˆ†äº«å·¥å…·
â”œâ”€â”€ index.html             # å…¥å£é¡µé¢
â””â”€â”€ README.md              # è¯´æ˜æ–‡æ¡£
```

---

## â“ å¸¸è§é—®é¢˜

### Q: ä¸Šä¼ å¤±è´¥æ€ä¹ˆåŠï¼Ÿ
A: æ£€æŸ¥æ˜¯å¦å·²æ­£ç¡®ç»‘å®š R2 å­˜å‚¨æ¡¶ï¼Œå˜é‡åå¿…é¡»æ˜¯ `BUCKET`ã€‚

### Q: ä¸ºä»€ä¹ˆçœ‹ä¸åˆ°æ“ä½œç»Ÿè®¡ï¼Ÿ
A: æ“ä½œç»Ÿè®¡éœ€è¦é…ç½® `CF_ACCOUNT_ID` å’Œ `CF_API_TOKEN` ç¯å¢ƒå˜é‡ã€‚

### Q: æ”¯æŒå¤šå¤§çš„æ–‡ä»¶ï¼Ÿ
A: å•æ–‡ä»¶æ”¯æŒæœ€å¤§ 5GBï¼ˆä½¿ç”¨åˆ†ç‰‡ä¸Šä¼ ï¼‰ã€‚

### Q: å¦‚ä½•è‡ªå®šä¹‰åŸŸåï¼Ÿ
A: åœ¨ Pages é¡¹ç›®è®¾ç½®ä¸­æ·»åŠ è‡ªå®šä¹‰åŸŸåï¼ŒCloudflare ä¼šè‡ªåŠ¨é…ç½® SSLã€‚

### Q: å¿˜è®°å¯†ç æ€ä¹ˆåŠï¼Ÿ
A: åœ¨ Pages ç¯å¢ƒå˜é‡ä¸­æŸ¥çœ‹ã€ä¿®æ”¹ï¼Œå¯¹åº”ç”¨æˆ·çš„å¯†ç ï¼Œä¿®æ”¹åé‡æ–°éƒ¨ç½²å³å¯ã€‚

---

## ğŸ“„ å¼€æºåè®®

æœ¬é¡¹ç›®åŸºäº [MIT License](LICENSE) å¼€æºã€‚

---

## ğŸ™ è‡´è°¢

- [longern/FlareDrive](https://github.com/longern/FlareDrive) - åŸé¡¹ç›®
- [Cloudflare](https://cloudflare.com) - æä¾›å…è´¹çš„ R2 å­˜å‚¨å’Œ Pages æ‰˜ç®¡
- [Vue.js](https://vuejs.org) - å‰ç«¯æ¡†æ¶
- [JSZip](https://stuk.github.io/jszip/) - ZIP æ‰“åŒ…åº“
